

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Contexts &mdash; ILAO Drupal 8 3.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Custom Rules" href="migration_rules.html" />
    <link rel="prev" title="Discussion groups" href="migration_discussion_groups.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> ILAO Drupal 8
          

          
          </a>

          
            
            
              <div class="version">
                3.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="migration.html">Migration Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="migration_users.html">Users and user profiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="migration_org_data.html">Migrating Organization Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="migration_otis_entities.html">OTIS-related migration</a></li>
<li class="toctree-l2"><a class="reference internal" href="migration_legal_content_types.html">Legal content migration</a></li>
<li class="toctree-l2"><a class="reference internal" href="migration_portal_pages.html">Portal content</a></li>
<li class="toctree-l2"><a class="reference internal" href="migration_toolboxes.html">Toolboxes and related structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="migration_events.html">Event nodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="migration_jobs.html">Job content types</a></li>
<li class="toctree-l2"><a class="reference internal" href="migration_internships.html">Internships content type</a></li>
<li class="toctree-l2"><a class="reference internal" href="migration_blog.html">Migration Blog Posts</a></li>
<li class="toctree-l2"><a class="reference internal" href="migration_basic_pages.html">Basic page content type</a></li>
<li class="toctree-l2"><a class="reference internal" href="migration_other_node_types.html">Other node types</a></li>
<li class="toctree-l2"><a class="reference internal" href="migration_search.html">Search migration</a></li>
<li class="toctree-l2"><a class="reference internal" href="migration_reporting.html">Views/Reporting Migration</a></li>
<li class="toctree-l2"><a class="reference internal" href="migration_seo.html">Migration: SEO features</a></li>
<li class="toctree-l2"><a class="reference internal" href="migration_google_analytics.html">Google analytics</a></li>
<li class="toctree-l2"><a class="reference internal" href="migration_sms.html">SMS and Twilio integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="migration_zendesk.html">Zendesk Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="migration_livechat.html">Livechat Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="migration_translation.html">Translation</a></li>
<li class="toctree-l2"><a class="reference internal" href="migration_mailchimp.html">Mailchimp Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="migration_discussion_groups.html">Discussion groups</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Contexts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#custom-contexts">Custom contexts</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#ilao-contexts-zipcode">ilao_contexts_zipcode</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ilao-contexts-legal-bundle-menu">ilao_contexts_legal_bundle_menu</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ilao-contexts-paragraphs-type">ilao_contexts_paragraphs_type</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ilao-contexts-oas-help-type">ilao_contexts_oas_help_type</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ilao-contexts-advocate-type">ilao_contexts_advocate_type</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ilao-context-oas-modal">ilao_context_oas_modal</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ilao-contexts-check-empty-variable">ilao_contexts_check_empty_variable</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ilao-contexts-check-region-specific-markup">ilao_contexts_check_region_specific_markup</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ilao-contexts-business-hours">ilao_contexts_business_hours</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ilao-contexts-service-type">ilao_contexts_service_type</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="migration_rules.html">Custom Rules</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="otis_drupal8.html">OTIS Drupal 8</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">ILAO Drupal 8</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="migration.html">Migration Documentation</a> &raquo;</li>
        
      <li>Contexts</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/migration_contexts.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="contexts">
<h1>Contexts<a class="headerlink" href="#contexts" title="Permalink to this headline">¶</a></h1>
<p>In Drupal 7, ILAO has used the Context module to control some layout and other functionality. We also have added a number of custom contexts in the ilao_context module.</p>
<div class="section" id="custom-contexts">
<h2>Custom contexts<a class="headerlink" href="#custom-contexts" title="Permalink to this headline">¶</a></h2>
<div class="section" id="ilao-contexts-zipcode">
<h3>ilao_contexts_zipcode<a class="headerlink" href="#ilao-contexts-zipcode" title="Permalink to this headline">¶</a></h3>
<p>Sets a context based on the user’s zip code</p>
<p>Returns on of:</p>
<ul class="simple">
<li>“US” if the zip code is a US zip code but not Illinois</li>
<li>“Illinois” if the zip code is in Illinois</li>
<li>“Not in US” if the zip code is not a US zip code</li>
</ul>
<p>Relies on the ilao_geolocation module.</p>
<p>Executes on node view</p>
</div>
<div class="section" id="ilao-contexts-legal-bundle-menu">
<h3>ilao_contexts_legal_bundle_menu<a class="headerlink" href="#ilao-contexts-legal-bundle-menu" title="Permalink to this headline">¶</a></h3>
<p>Sets a context based on whether a bundle menu should be displayed</p>
<p>Returns one of:</p>
<ul class="simple">
<li>Bundle overview, when the node being viewed is a Guide</li>
<li>Learn more, when the node being viewed is in a single Guide as a Learn more article</li>
<li>Take action, when the node being viewed is in a single Guide as a take action article</li>
<li>Multiple (Appears in multiple legal bundles), when the node being viewed is in more than one Guide</li>
<li>None, when the node being viewed is not associated with a Guide</li>
</ul>
<p>Executes on node view</p>
</div>
<div class="section" id="ilao-contexts-paragraphs-type">
<h3>ilao_contexts_paragraphs_type<a class="headerlink" href="#ilao-contexts-paragraphs-type" title="Permalink to this headline">¶</a></h3>
<p>Sets a context based on the paragraphs bundles in a specific node</p>
<p>Returns one of:</p>
<ul class="simple">
<li>Automated documents</li>
<li>Decision tree</li>
<li>Video</li>
<li>Static form</li>
<li>Link</li>
<li>File</li>
<li>Article</li>
<li>IICLE</li>
<li>Process</li>
<li>Legal bundle</li>
</ul>
<p>based on the paragraphs included in the node and is applied only to legal content. If a node has multiple paragraph bundles, it is set based on the following hierarchy:</p>
<ul class="simple">
<li>Autodocs</li>
<li>Legal bundle if not an autodocs</li>
<li>Process step if not an autodoc or bundle</li>
<li>Video if not a process step or autodoc</li>
<li>All others only if nothing else has been set</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This could probably be replaced with a check for primary content format but may break if the taxonomy is changed.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This is behind.  Is missing some content formats.</p>
</div>
<p>Executes on node view</p>
</div>
<div class="section" id="ilao-contexts-oas-help-type">
<h3>ilao_contexts_oas_help_type<a class="headerlink" href="#ilao-contexts-oas-help-type" title="Permalink to this headline">¶</a></h3>
<p>Sets a context based on the type of help a user (information, forms, or lawyer) has selected. It is designed to handle all permutations of options.</p>
<p>Returns one of:</p>
<ul class="simple">
<li>Information only (user only checked help finding information)</li>
<li>Forms only (user only checked court forms)</li>
<li>Information and forms (user checked all but lawyer)</li>
<li>Lawyer, information and form (user checked all 3 options)</li>
<li>Lawyer, forms (user checked lawyer, court forms but not information)</li>
<li>Lawyer, content (user checked lawyer, information but not court forms)</li>
<li>Lawyer (user checked lawyer only)</li>
</ul>
<p>Fires on page reaction when the user is on one of the following:</p>
<ul class="simple">
<li>get-legal-help/referrals</li>
<li>get-legal-help/callback-confirm</li>
<li>get-legal-help/please-call</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Should this context be available for get-legal-help/bypass?</p>
</div>
</div>
<div class="section" id="ilao-contexts-advocate-type">
<h3>ilao_contexts_advocate_type<a class="headerlink" href="#ilao-contexts-advocate-type" title="Permalink to this headline">¶</a></h3>
<p>Sets a context based on the OG member roles a user has.</p>
<p>Returns one of:</p>
<ul class="simple">
<li>‘non member’</li>
<li>‘staff’</li>
<li>‘organization manager’</li>
<li>‘OAS manager’</li>
</ul>
<p>The logic works as follows: for a specific user ID, it loads the organization the uer is a member of and then the roles.  By default, the user is set to staff.  If they are an OAS manager, the status is set to OAS manager (regardless of any other roles); If they are an organization manager (but not an OAS manager), the context returns organization manager.</p>
<p>For ILAO staff and interns, the context returns non-member since we do not need this context.</p>
<p>Executes on page reaction when the page path is one of:</p>
<ul class="simple">
<li>node/edit</li>
<li>node/add/location-services</li>
<li>node/add/location</li>
<li>user/</li>
</ul>
</div>
<div class="section" id="ilao-context-oas-modal">
<h3>ilao_context_oas_modal<a class="headerlink" href="#ilao-context-oas-modal" title="Permalink to this headline">¶</a></h3>
<p>Seta a context based on whether we should show the OAS modal.</p>
<p>Returns one of:</p>
<ul class="simple">
<li>Intake available; single issue</li>
<li>Intake available; multiple issues</li>
<li>Intake closed</li>
</ul>
<p>Relies on oas_modal_apply module</p>
<p>Executes on node view.</p>
</div>
<div class="section" id="ilao-contexts-check-empty-variable">
<h3>ilao_contexts_check_empty_variable<a class="headerlink" href="#ilao-contexts-check-empty-variable" title="Permalink to this headline">¶</a></h3>
<p>Set this context to check if variable exists and is not empty.</p>
<p>Uses a custom form to determine if a variable exists.</p>
<p>Returns true if the variable exists and is not empty.</p>
<p>Executes on page reaction and node view</p>
</div>
<div class="section" id="ilao-contexts-check-region-specific-markup">
<h3>ilao_contexts_check_region_specific_markup<a class="headerlink" href="#ilao-contexts-check-region-specific-markup" title="Permalink to this headline">¶</a></h3>
<p>Set this context to check if node contains region specific Markup</p>
<p>Does not return values but does return a custom form if regional markup is found</p>
<p>Executes on node view</p>
</div>
<div class="section" id="ilao-contexts-business-hours">
<h3>ilao_contexts_business_hours<a class="headerlink" href="#ilao-contexts-business-hours" title="Permalink to this headline">¶</a></h3>
<p>Set this context to when current time in business hours.</p>
<p>Returns one of:</p>
<ul class="simple">
<li>Weekday business hours, when the current time is between 9am and 5pm Mon-Fri</li>
<li>Outside business hours, when the current time is between 5pm and 9am Mon - Fri</li>
<li>Weekend hours, when the current day is Saturday or Sunday</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This context was created to control fundraising pop ups and should be evaluated to determine if it in fact needs to be migrated.</p>
</div>
<p>Executes on page reaction (all pages)</p>
</div>
<div class="section" id="ilao-contexts-service-type">
<h3>ilao_contexts_service_type<a class="headerlink" href="#ilao-contexts-service-type" title="Permalink to this headline">¶</a></h3>
<p>Sets this context based on the service type of a location service node</p>
<p>Returns one of:</p>
<ul class="simple">
<li>Legal self-help center</li>
<li>Direct representation</li>
<li>Lawyer referral service</li>
</ul>
<p>Executes on node view</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="migration_rules.html" class="btn btn-neutral float-right" title="Custom Rules" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="migration_discussion_groups.html" class="btn btn-neutral" title="Discussion groups" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, ILAO.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'3.0',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>